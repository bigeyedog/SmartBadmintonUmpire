<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Singles setup</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="setup.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Indie+Flower|Lobster"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Noto+Sans+HK:wght@100;300;400;500;700;900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
    />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script
      src="https://kit.fontawesome.com/147b2895a5.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <body id="body">
    <div id="upper">
      <p class="p" id="displayText"></p>
    </div>

    <div id="lower">
      <div id="lowerL2">
        <div id="lowerL2C1"></div>
        <div id="lowerL2C2"></div>
        <div id="lowerL2C3">
          <select class="select" id="RUplayer" name="RUplayer" required>
            <option class="option" value="" selected disabled>
              Choose one:
            </option>
            <option class="option" id="RU1" value=""></option>
            <option class="option" id="RU2" value=""></option>
          </select>
          <!-- <br />
            <img class="playerphoto" src="/fox.png" /> -->
        </div>
      </div>

      <div id="lowerL3">
        <div id="lowerL3C1">
          <select class="select" id="LLplayer" name="LLplayer" required>
            <option class="option" value="" selected disabled>
              Choose one:
            </option>
            <option class="option" id="LL1" value=""></option>
            <option class="option" id="LL2" value=""></option>
          </select>
          <!-- <br />
            <img class="playerphoto" src="/elephant.png" /> -->
        </div>
        <div id="lowerL3C2"></div>
        <div id="lowerL3C3"></div>
      </div>

      <div id="lowerL4">
        <label id="label">Serving player:</label>
        <select id="servingPlayer" class="select" name="servingPlayer" required>
          <option class="option" value="" selected disabled>Choose one:</option>
          <option class="option" id="SP1" value=""></option>
          <option class="option" id="SP2" value=""></option>
        </select>
      </div>

      <div id="lowerL5">
        <!-- <button type="reset" id="resetbutton">Reset</button>
          <button
            type="button"
            id="homebutton"
            onclick="window.location.href = '/index.html'"
          >
            Home
          </button> -->
        <button type="button" id="submitbutton" onclick="goToGame()">
          Go to game
        </button>
      </div>
    </div>

    <script>
      const player1 = sessionStorage.getItem("player1");
      const player2 = sessionStorage.getItem("player2");
      const gametype = sessionStorage.getItem("gametype");
      const format = sessionStorage.getItem("format");
      const displayText = gametype + ", " + format;
      document.getElementById("displayText").textContent = displayText;
      document.getElementById("LL1").textContent = player1;
      document.getElementById("LL2").textContent = player2;
      document.getElementById("RU1").textContent = player1;
      document.getElementById("RU2").textContent = player2;
      document.getElementById("SP1").textContent = player1;
      document.getElementById("SP2").textContent = player2;
      document.getElementById("LL1").value = player1;
      document.getElementById("LL2").value = player2;
      document.getElementById("RU1").value = player1;
      document.getElementById("RU2").value = player2;
      document.getElementById("SP1").value = player1;
      document.getElementById("SP2").value = player2;
    </script>

    <script>
      $(document).ready(function () {
        // Get the select elements
        const $ruPlayer = $("#RUplayer");
        const $llPlayer = $("#LLplayer");
        const player1 = sessionStorage.getItem("player1");
        const player2 = sessionStorage.getItem("player2");

        // Function to set the opposite player
        function setOppositePlayer(selectElement) {
          if (selectElement.val() === player1) {
            if (selectElement.is($ruPlayer)) {
              $llPlayer.val(player2);
            } else {
              $ruPlayer.val(player2);
            }
          } else if (selectElement.val() === player2) {
            if (selectElement.is($ruPlayer)) {
              $llPlayer.val(player1);
            } else {
              $ruPlayer.val(player1);
            }
          }
        }

        // Set initial opposite values
        setOppositePlayer($ruPlayer);
        setOppositePlayer($llPlayer);

        // Add change event handlers
        $ruPlayer.on("change", function () {
          setOppositePlayer($(this));
        });

        $llPlayer.on("change", function () {
          setOppositePlayer($(this));
        });
      });
    </script>

    <script>
      function goToGame() {
        const ruPlayer = document.getElementById("RUplayer").value.trim();
        const llPlayer = document.getElementById("LLplayer").value.trim();
        const sPlayer = document.getElementById("servingPlayer").value.trim();

        if (ruPlayer === "" || llPlayer === "") {
          alert("Please choose player on the court.");
          return;
        }

        if (sPlayer === "") {
          alert("Please choose the serving player.");
          return;
        }

        sessionStorage.setItem("ruPlayer", ruPlayer);
        sessionStorage.setItem("llPlayer", llPlayer);
        sessionStorage.setItem("sPlayer", sPlayer);

        const format = sessionStorage.getItem("format");
        if (format === "21 point game") {
          window.location.href = "singleGame121.html";
        } else if (format === "30 point game") {
          window.location.href = "singleGame130.html";
        } else if (format === "21 point game (best of 3)") {
          window.location.href = "singleGame321a.html";
        }
      }
    </script>
  </body>
</html>
